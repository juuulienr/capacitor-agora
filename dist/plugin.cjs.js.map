{"version":3,"file":"plugin.cjs.js","sources":["esm/index.js","esm/web.js"],"sourcesContent":["import { registerPlugin } from '@capacitor/core';\nconst Agora = registerPlugin('Agora', {\n    web: () => import('./web').then((m) => new m.AgoraWeb()),\n});\nexport * from './definitions';\nexport { Agora };\n//# sourceMappingURL=index.js.map","import { WebPlugin } from '@capacitor/core';\nexport class AgoraWeb extends WebPlugin {\n    async initialize(options) {\n        console.log('[AgoraWeb] initialize called with options:', options);\n        const AgoraRTC = window.AgoraRTC;\n        if (!AgoraRTC) {\n            throw new Error('[AgoraWeb] AgoraRTC is not available. Ensure you included the AgoraRTC script.');\n        }\n        // Création d'un client Agora\n        this.client = AgoraRTC.createClient({ mode: 'rtc', codec: 'vp8' });\n        console.log('[AgoraWeb] AgoraRTC client created');\n    }\n    async setupLocalVideo() {\n        console.log('[AgoraWeb] setupLocalVideo called');\n        const AgoraRTC = window.AgoraRTC;\n        if (!AgoraRTC) {\n            throw new Error('[AgoraWeb] AgoraRTC is not available.');\n        }\n        // Création des pistes vidéo et audio locales\n        this.localVideoTrack = await AgoraRTC.createCameraVideoTrack();\n        this.localAudioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n        // Lecture de la vidéo locale dans un conteneur DOM\n        const container = document.createElement('div');\n        container.id = 'local-video';\n        container.style.width = '100%';\n        container.style.height = '100%';\n        document.body.appendChild(container);\n        this.localVideoTrack.play('local-video');\n        console.log('[AgoraWeb] Local video track started');\n    }\n    async joinChannel(options) {\n        console.log('[AgoraWeb] joinChannel called with options:', options);\n        if (!this.client) {\n            throw new Error('[AgoraWeb] Client is not initialized. Call initialize() first.');\n        }\n        // Rejoindre un canal avec le client et les pistes locales\n        await this.client.join(options.token, options.channelName, options.uid);\n        console.log('[AgoraWeb] Joined channel:', options.channelName);\n        if (this.localAudioTrack && this.localVideoTrack) {\n            await this.client.publish([this.localAudioTrack, this.localVideoTrack]);\n            console.log('[AgoraWeb] Local audio and video tracks published');\n        }\n    }\n    async switchCamera() {\n        console.log('[AgoraWeb] switchCamera called');\n        if (!this.localVideoTrack) {\n            throw new Error('[AgoraWeb] Local video track is not initialized.');\n        }\n        await this.localVideoTrack.setDevice('next');\n        console.log('[AgoraWeb] Camera switched');\n    }\n    async leaveChannel() {\n        console.log('[AgoraWeb] leaveChannel called');\n        if (!this.client) {\n            throw new Error('[AgoraWeb] Client is not initialized.');\n        }\n        // Arrête les pistes locales\n        if (this.localVideoTrack) {\n            this.localVideoTrack.stop();\n            this.localVideoTrack.close();\n        }\n        if (this.localAudioTrack) {\n            this.localAudioTrack.stop();\n            this.localAudioTrack.close();\n        }\n        // Quitte le canal\n        await this.client.leave();\n        console.log('[AgoraWeb] Left channel');\n    }\n    async enableWebViewTransparency() {\n        console.log('[AgoraWeb] enableWebViewTransparency called');\n        // Implémentation Web spécifique si applicable\n        throw this.unimplemented('[AgoraWeb] enableWebViewTransparency is not implemented on the web.');\n    }\n    async disableWebViewTransparency() {\n        console.log('[AgoraWeb] disableWebViewTransparency called');\n        // Implémentation Web spécifique si applicable\n        throw this.unimplemented('[AgoraWeb] disableWebViewTransparency is not implemented on the web.');\n    }\n}\n//# sourceMappingURL=web.js.map"],"names":["registerPlugin","WebPlugin"],"mappings":"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"}